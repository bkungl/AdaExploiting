with Ada.Unchecked_Deallocation;
with Ada.Integer_Text_IO; use Ada.Integer_Text_IO;

procedure test is
	pragma suppress(all_checks);

	type int_ptr is access all integer;

	function one return int_ptr is 
		x : aliased int_ptr;
	begin
		x := new Integer'(12);
		return x;
	end one;

	procedure two (input: in int_ptr) is 
		important_val : aliased int_ptr;
	begin
		important_val := input;
		Ada.Integer_Text_IO.put(important_val.all);
	end two;

        procedure free is new Ada.Unchecked_Deallocation (Integer, int_Ptr);


	output : aliased int_ptr;
	output2 : aliased int_ptr;
begin
	output := one;
	output2 := output;
		
	free(output);

	two(output2);
end test ;
